---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "Ophelia's Flowers â€” Dahlia tubers for the passionate gardener." } = Astro.props;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | Ophelia's Flowers</title>
  </head>
  <body>
    <slot name="header">
      <header
        class="border-b border-black px-6 py-6 flex items-center justify-between"
      >
        <a href="/" class="no-underline">
          <span class="text-2xl font-bold tracking-tight">
            Ophelia's Flowers
          </span>
        </a>
        <nav aria-label="Main navigation">
          <ul class="flex gap-6 text-sm uppercase tracking-widest items-center">
            <li><a href="/varieties">Shop</a></li>
            <li><a href="/about">About</a></li>
            <li>
              <a href="/cart" class="relative inline-flex items-center no-underline" aria-label="Cart">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                  <circle cx="9" cy="21" r="1"></circle>
                  <circle cx="20" cy="21" r="1"></circle>
                  <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                <span id="cart-count" class="absolute -top-2 -right-3 bg-black text-white text-xs w-5 h-5 flex items-center justify-center" hidden>0</span>
              </a>
            </li>
          </ul>
        </nav>
      </header>
    </slot>

    <main class="flex-1">
      <slot />
    </main>

    <footer class="border-t border-black px-6 py-8 mt-auto">
      <div class="flex flex-col gap-2 text-sm text-neutral-500">
        <p>&copy; {new Date().getFullYear()} Ophelia's Flowers. All rights reserved.</p>
        <p>Dahlia tubers for the passionate gardener.</p>
      </div>
    </footer>

    <script>
      import { loadCart, getCartItemCount } from "../lib/commerce/cart";

      const cartCount = document.getElementById("cart-count");
      if (cartCount) {
        const cart = loadCart();
        const count = getCartItemCount(cart);
        if (count > 0) {
          cartCount.textContent = String(count);
          cartCount.hidden = false;
        }
      }
    </script>
  </body>
</html>
